<!DOCTYPE html>
<html lang="zh_CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  
  <meta name="keywords" content="网站关键字">
  <meta name="description" content="网站简介">
  
  <title>分享与进步</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/materialize.min.css">
    
      <link rel="stylesheet" href="/css/main.min.css">
    
  
  <style type="text/css">
      html{
          font-family: sans-serif;
          font-weight: 300;
      }
      @font-face {
          font-family: 'Material Icons';
          font-style: normal;
          font-weight: 400;
          src: url(/fonts/MaterialIcons-Regular.eot);
          src: url(/fonts/MaterialIcons-Regular.woff2) format('woff2'),
          url(/fonts/MaterialIcons-Regular.woff) format('woff'),
          url(/fonts/MaterialIcons-Regular.ttf) format('truetype')
      }
  </style>
</head>
<body>
<div id="menu-box"><a href="javascript:void(0)" id="menu" data-activates="slide-out" class="button-collapse menu" ><span class="nav-btn"></span></a></div>
<div id="menu-outer">
  <div id="menu-inner">
      <ul id="slide-out" class="side-nav" >
    <div class="nav-header"  style="background-image: url(/images/header-bg.png);background-color:#26A69A">
    <div class="header-box"><img src="/images/header.png" ondragstart="return false;"></div>
    <p>David Chen</p>
    <div class="nav-link">
        
        <a href="https://twitter.com/DavidDivading" target="_blank"> <div class="link-box twitter"></div></a>
        
        
        <a  href="http://github.com/cbcing" target="_blank"><div class="link-box github"></div></a>
        
        
        <a href="mailto:davvvvvvidchen@gmail.com"><div class="link-box email"></div></a>
        
        
        <a href="https://weibo.com/3543577592/profile" target="_blank"><div class="link-box weibo"></div></a>
        
        
        <a href="http://example.com" target="_blank"> <div class="link-box zhihu"></div></a>
        
    </div>
    <div class="nav-search">
        <form id="search-form"> <!-- 搜索框相关 -->
            <input type="text" id="local-search-input" name="q" results="0" placeholder="搜索..." class="search form-control" autocomplete="off" autocorrect="off"/>
            <div class="nav-search-img"><i class="material-icons">search</i></div>
        </form>
        <div id="local-search-result"></div> <!-- 搜索结果区 -->
        <p class='no-result'>无搜索结果</p>
    </div>
</div>
    <!--Homepage-->

<li class="nav-list">
    <a href="/" target="_self">
        <div class="nav-ico"><i class="material-icons">home</i> </div><p>主页</p>
    </a>
</li>

<!--archives-->

<li class="nav-list dropdown-btn">
    <a  class=""  target="_self">
        <div class="nav-ico"><i class="material-icons">assignment</i></div><p>归档</p><div class="dropdown-ico"><i class="material-icons">arrow_drop_down</i></div>
    </a>
</li>

<ul class="dropdown-menu dropdown" >
    <li class="nav-dropdown-list">
        <a class="archive-link" href="/archives/2018/01/">一月 2018<span class="archive-count">1</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2017/11/">十一月 2017<span class="archive-count">2</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2017/10/">十月 2017<span class="archive-count">2</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2017/09/">九月 2017<span class="archive-count">3</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2017/08/">八月 2017<span class="archive-count">1</span></a>
    </li>
</ul>
<!--categories-->

<li class="nav-list dropdown-btn">
    <a   class=""  target="_self">
        <div class="nav-ico"><i class="material-icons">dashboard</i></div><p>分类</p><div class="dropdown-ico"><i class="material-icons">arrow_drop_down</i></div>
    </a>
</li>

<ul class="dropdown-menu dropdown" >
    <li class="nav-dropdown-list">
        <a class="category-link" href="/categories/人生/">人生<span class="category-count">1</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/技术/">技术<span class="category-count">3</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/比心/">比心<span class="category-count">1</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/随笔/">随笔<span class="category-count">1</span></a>
    </li>
</ul>
<!--tags-->

<li class="nav-list">
    <a href="/archives" target="_self">
        <div class="nav-ico"><i class="material-icons">bookmark</i> </div><p>标签</p>
    </a>
</li>

<!--photo-->

<li class="nav-list">
    <a href="/photo" class="nopjax" target="_self">
        <div class="nav-ico"><i class="material-icons">insert_photo</i> </div><p>影集</p>
    </a>
</li>

<!--friends-->

<li class="nav-list">
    <a href="/friends" target="_self">
        <div class="nav-ico"><i class="material-icons">face</i> </div><p>友链</p>
    </a>
</li>

<!--about-->

<li class="nav-list">
    <a href="/about" target="_self">
        <div class="nav-ico"><i class="material-icons">copyright</i> </div><p>关于</p>
    </a>
</li>


</ul>

  </div>
</div>

<div id="content-outer">
  <div id="content-inner">
    
<article id="post">
  <div class="post-page-title" style="background-color:#26A69A;background-image:url(/images/cbc/five.png)" >
  <h2>superset技术栈</h2>
    
  <p>作者:David Chen &nbsp&nbsp 发布于:<time datetime="2017-10-11T04:45:50.000Z">
          2017-10-11
    </time>
  </p>
    
  </div>
  <div class="post-page-content">
  <h3 id="Flask-amp-Flask-AppBuilder-应用"><a href="#Flask-amp-Flask-AppBuilder-应用" class="headerlink" title="Flask &amp; Flask AppBuilder 应用"></a>Flask &amp; Flask AppBuilder 应用</h3><h4 id="Flask是一个使用python编写的轻量级Web应用框架。"><a href="#Flask是一个使用python编写的轻量级Web应用框架。" class="headerlink" title="Flask是一个使用python编写的轻量级Web应用框架。"></a>Flask是一个使用python编写的轻量级Web应用框架。</h4><p><a href="http://flask.pocoo.org/" target="_blank" rel="external">http://flask.pocoo.org/</a><br><a href="http://docs.jinkan.org/docs/flask/quickstart.html#a-minimal-application" target="_blank" rel="external">http://docs.jinkan.org/docs/flask/quickstart.html#a-minimal-application</a></p>
<h4 id="Flask-AppBuilder是一个搭建在Flask之上的简单的快速的应用程序开发框架。"><a href="#Flask-AppBuilder是一个搭建在Flask之上的简单的快速的应用程序开发框架。" class="headerlink" title="Flask AppBuilder是一个搭建在Flask之上的简单的快速的应用程序开发框架。"></a>Flask AppBuilder是一个搭建在Flask之上的简单的快速的应用程序开发框架。</h4><p><a href="http://flask-appbuilder.readthedocs.io/en/latest/installation.html" target="_blank" rel="external">http://flask-appbuilder.readthedocs.io/en/latest/installation.html</a></p>
<h4 id="使用Flask构建一个最简单的一个应用："><a href="#使用Flask构建一个最简单的一个应用：" class="headerlink" title="使用Flask构建一个最简单的一个应用："></a>使用Flask构建一个最简单的一个应用：</h4><p>1、安装Flask<br>sudo pip install Flask</p>
<p>2、编写hello.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</div><div class="line">app = Flask(__name__)</div><div class="line"></div><div class="line"><span class="meta">@app.route('/')</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'Hello MYZD'</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ = <span class="string">'__main__'</span>:</div><div class="line">    app.run()</div></pre></td></tr></table></figure>
<p>3、运行你的app<br>FLASK_APP=hello.py flask run</p>
<p>Runing on <a href="http://localhost:5000" target="_blank" rel="external">http://localhost:5000</a></p>
<p>4、打开浏览器，输入<a href="http://localhost:5000" target="_blank" rel="external">http://localhost:5000</a><br><img src="/images/superset_4.png" alt="alt text"></p>
<p>备注：以上例子仅是表达flask的简单与快速。</p>
<h5 id="使用Flask-AppBuilder快速搭建应用："><a href="#使用Flask-AppBuilder快速搭建应用：" class="headerlink" title="使用Flask AppBuilder快速搭建应用："></a>使用Flask AppBuilder快速搭建应用：</h5><p>1、安装依赖包<br>sudo pip install flask-appbuilder<br>2、创建一个app<br>fabmanager create-app<br>3、为app创建一个用户<br>fabmanager create-admin<br>4、运行你的app<br>fabmanager run</p>
<p>5、打开浏览器，输入<a href="http://localhost:8080即可，如下图：" target="_blank" rel="external">http://localhost:8080即可，如下图：</a><br><img src="/images/superset_1.png" alt="alt text"><br><img src="/images/superset_2.png" alt="alt text"><br><img src="/images/superset_3.png" alt="alt text"><br>备注：<br>以上例子仅是表达Flask-AppBuilder的快速与简单。<br>新应用和Superset很是类似。</p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><p>Superset是基于Flask-AppBuilder构建。</p>
<h3 id="Flask基本原理分析"><a href="#Flask基本原理分析" class="headerlink" title="Flask基本原理分析"></a>Flask基本原理分析</h3><h4 id="WSGI-Web-Server-Gateway-Interface"><a href="#WSGI-Web-Server-Gateway-Interface" class="headerlink" title="WSGI(Web Server Gateway Interface)"></a>WSGI(Web Server Gateway Interface)</h4><p>WSGI，全称Web Server Gateway Interface或者Python Web Server Gateway Interface，是为python语言定义的Web服务器和Web应用程序（或者Web框架）之间的一种简单而通用的接口。<br>WSGI是基于现存的CGI（Common Gateway Interface／通用网关接口）标准而设计的。<br>顾名思义，WSGI是一个Gateway（网关），网关的作用就是在协议之间进行转换。<br>WSGI其实就是起到一个接口的功能，一边对接服务器，一边则对接app具体功能。</p>
<h4 id="WSGI具体的功能"><a href="#WSGI具体的功能" class="headerlink" title="WSGI具体的功能"></a>WSGI具体的功能</h4><p>上面讲到了WSGI可以起到一个接口的功能，前面对接服务器，后面对接app的具体功能<br>我们先看一个最简单的wsgi_app的实现：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">application</span><span class="params">(evniron, start_response)</span>:</span> <span class="comment">#一个符合wsgi的程序应该接受2个参数，evniron为http的相关信息，如请求头灯，start_response则是响应信息。</span></div><div class="line">    start_response(<span class="string">'200 OK'</span>, [&#123;<span class="string">'Content-Type'</span>, <span class="string">'text/html'</span>&#125;])</div><div class="line">    <span class="keyword">return</span> [<span class="string">b'&lt;h1&gt;Hello world&lt;/h1&gt;'</span>] <span class="comment">#return出来的是响应内容。</span></div></pre></td></tr></table></figure>
<p>但是，作为app本身，就算启动了程序，是无法给application程序传递参数的，调用application并且传递两个参数的动作是有服务器来完成的，比如Gunicorn，而这个叫做application的东西，在Flask框架中，叫做wsgi_app。</p>
<h4 id="现在回头来看这段代码："><a href="#现在回头来看这段代码：" class="headerlink" title="现在回头来看这段代码："></a>现在回头来看这段代码：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</div><div class="line">app = Flask(__name__)</div><div class="line"></div><div class="line"><span class="meta">@app.route('/')</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'Hello MYZD'</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ = <span class="string">'__main__'</span>:</div><div class="line">    app.run()</div></pre></td></tr></table></figure>
<p>这段代码做了什么？（这里取自官方文档）<br>1、首先，我们导入了 Flask 类。这个类的实例将会是我们的 WSGI 应用程序。<br>2、接下来，我们创建一个该类的实例，第一个参数是应用模块或者包的名称。 如果你使用单一的模块（如本例），你应该使用 __name__ ，因为模块的名称将会因其作为单独应用启动还是作为模块导入而有不同（ 也即是 ‘__main__‘ 或实际的导入名）。这是必须的，这样 Flask 才知道到哪去找模板、静态文件等等。<br>3、然后，我们使用 route() 装饰器告诉 Flask 什么样的URL 能触发我们的函数。<br>4、这个函数的名字也在生成 URL 时被特定的函数采用，这个函数返回我们想要显示在用户浏览器中的信息。<br>5、最后我们用 run() 函数来让应用运行在本地服务器上。 其中 if __name__ == ‘__main__‘: 确保服务器只会在该脚本被 Python 解释器直接执行的时候才会运行，而不是作为模块导入的时候。<br>这段代码写完后，一个flask app就生成了！<br>但是你需要注意的是，当web服务器收（eg. gunicron）到http请求，去调用你的app的时候，它实际上是调用了Flask的__call__方法，这点很重要，因为__call__方法怎么写，就决定了你的application（在Flask中叫做wsgi_app）的整个流程从哪里开始。</p>
<p>让我们来看一下__call__方法的源码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flask</span><span class="params">(_PackageBoundObject)</span>:</span></div><div class="line"><span class="comment">#此处省略其他代码</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, environ, start_response)</span>:</span></div><div class="line">        <span class="string">""" Shourcut for :attr:`wsgi_app`. """</span></div><div class="line">        <span class="keyword">return</span> self.wsgi_app(environ, start_response)</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wsgi_app</span><span class="params">(self, environ, start_response)</span>:</span></div><div class="line">        <span class="string">"""The actual WSGI application.  This is not implemented in </span></div><div class="line"><span class="string">        `__call__` so that middlewares can be applied without losing a </span></div><div class="line"><span class="string">        reference to the class.  So instead of doing this:: </span></div><div class="line"><span class="string"> </span></div><div class="line"><span class="string">            app = MyMiddleware(app) </span></div><div class="line"><span class="string"> </span></div><div class="line"><span class="string">        It's a better idea to do this instead:: </span></div><div class="line"><span class="string"> </span></div><div class="line"><span class="string">            app.wsgi_app = MyMiddleware(app.wsgi_app) </span></div><div class="line"><span class="string"> </span></div><div class="line"><span class="string">        Then you still have the original application object around and </span></div><div class="line"><span class="string">        can continue to call methods on it. </span></div><div class="line"><span class="string"> </span></div><div class="line"><span class="string">        :param environ: a WSGI environment </span></div><div class="line"><span class="string">        :param start_response: a callable accepting a status code, </span></div><div class="line"><span class="string">                               a list of headers and an optional </span></div><div class="line"><span class="string">                               exception context to start the response </span></div><div class="line"><span class="string">        """</span>  </div><div class="line">        ctx = self.request_context(environ)</div><div class="line">        ctx.push()  </div><div class="line">        error = <span class="keyword">None</span>  </div><div class="line">        <span class="keyword">try</span>:  </div><div class="line">            <span class="keyword">try</span>:  </div><div class="line">                response = self.full_dispatch_request()		<span class="comment">#full_dispatch_request起到了预处理和错误处理以及分发请求的作用。</span></div><div class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:  </div><div class="line">                error = e  </div><div class="line">                response = self.make_response(self.handle_exception(e))  	<span class="comment">#如果有错误发生，则生成错误响应。</span></div><div class="line">            <span class="keyword">return</span> response(environ, start_response)       	<span class="comment">#如果没有错误发生，则正常响应请求，返回响应内容。</span></div><div class="line">        <span class="keyword">finally</span>:  </div><div class="line">            <span class="keyword">if</span> self.should_ignore_error(error):  </div><div class="line">                error = <span class="keyword">None</span>  </div><div class="line">            ctx.auto_pop(error)</div></pre></td></tr></table></figure>
<h3 id="Flask-AppBuilder基本原理分析"><a href="#Flask-AppBuilder基本原理分析" class="headerlink" title="Flask AppBuilder基本原理分析"></a>Flask AppBuilder基本原理分析</h3><p>先看一下API Rederence目录结构（截取）:</p>
<ul>
<li>flask_appbuilder<ul>
<li>AppBuilder</li>
</ul>
</li>
<li>flask_appbuilder.security.decorators</li>
<li>flask_appbuilder.models.decorators</li>
<li>flask_appbuilder.baseviews<ul>
<li>BaseView</li>
<li>BaseFormView</li>
<li>BaseModelView</li>
<li>BaseCRUDView</li>
</ul>
</li>
<li>flask_appbuilder.views<ul>
<li>IndexView</li>
<li>SimpleFormView9</li>
<li>PublicFormView</li>
<li>ModelView</li>
<li>MultipleView</li>
<li>MasterDetailView</li>
<li>CompactCRUDMixin</li>
</ul>
</li>
<li>flask_appbuilder.actions</li>
<li>flask_appbuilder.security<ul>
<li>BaseSecurityManger</li>
<li>BaseRegisterUser</li>
</ul>
</li>
<li>flask_appbuilder.filemanager</li>
<li>Aggr Functions for Group By Charts</li>
<li>flask_appbuilder.charts.views<ul>
<li>BaseChartView</li>
<li>DirectByChartView</li>
<li>GroupByChartView</li>
<li>(Deprecated) ChartView</li>
<li>(Deprecated) TimeChartView</li>
<li>(Deprecated) DirectChartView</li>
</ul>
</li>
<li>flask_appbuilder.models.mixins<ul>
<li>Extra Columns</li>
<li>Generic Data Source (Beta)</li>
</ul>
</li>
<li>flask_appbuilder.models.generic</li>
</ul>
<h4 id="flask-appbuilder"><a href="#flask-appbuilder" class="headerlink" title="flask_appbuilder"></a>flask_appbuilder</h4><ul>
<li>AppBuilder:</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">flask_appbuilder</span>.<span class="title">base</span>.<span class="title">AppBuilder</span><span class="params">(app=None, session=None, menu=None, indexview=None, base_template=<span class="string">'appbuilder/baselayout.html'</span>, static_folder=<span class="string">'static/appbuilder'</span>, static_url_path=<span class="string">'/appbuilder'</span>, security_manager_class=None)</span></span></div></pre></td></tr></table></figure>
<p>这是框架的基类。在这里面你会创建注册你所有的视图并且创建你的菜单结构，它会持有你的flask app对象，你的所有视图和安全类。</p>
<p>比如：为你的SQLAlchemy初始化程序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">form flask <span class="keyword">import</span> Flask</div><div class="line">form flask_appbuilder <span class="keyword">import</span> SQLA, AppBuilder</div><div class="line"></div><div class="line">app = Flask(__name__)</div><div class="line">app.config.form_object(<span class="string">'config'</span>)</div><div class="line">db = SQLA(app)</div><div class="line">appbuilder = AppBuilder(app, db.session)</div></pre></td></tr></table></figure>
<p>如果你使用MongoEngine：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</div><div class="line"><span class="keyword">from</span> flask_appbuilder <span class="keyword">import</span> AppBuilder</div><div class="line"><span class="keyword">from</span> flask_appbuilder.security.mongoengine.manager <span class="keyword">import</span> SecurityManager</div><div class="line"><span class="keyword">from</span> flask_mongoengine <span class="keyword">import</span> MongoEngine</div><div class="line"></div><div class="line">app = Flask(__name__)</div><div class="line">app.config.from_object(<span class="string">'config'</span>)</div><div class="line">dbmongo = MongoEngine(app)</div><div class="line">appbuilder = AppBuilder(app, security_manager_class=SecurityManager)</div></pre></td></tr></table></figure>
<p>你也可以像一个应用程序工厂一样创建任何东西：</p>
<p>AppBuilder constructor:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">__init__(app=<span class="keyword">None</span>, session=<span class="keyword">None</span>, menu=<span class="keyword">None</span>, indexview=<span class="keyword">None</span>, base_template=<span class="string">'appbuilder/baselayout.html'</span>, static_folder=<span class="string">'static/appbuilder'</span>, static_url_path=<span class="string">'/appbuilder'</span>, security_manager_class=<span class="keyword">None</span>)</div></pre></td></tr></table></figure>
<p>使用以下方法将你的链接添加至菜单：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">add_link(name, href, icon=<span class="string">''</span>, label=<span class="string">''</span>, category=<span class="string">''</span>, category_icon=<span class="string">''</span>, category_label=<span class="string">''</span>, baseview=<span class="keyword">None</span>)</div></pre></td></tr></table></figure>
<p>还有许多方法，详情请见：<a href="http://flask-appbuilder.readthedocs.io/en/latest/api.html#flask-appbuilder" target="_blank" rel="external">http://flask-appbuilder.readthedocs.io/en/latest/api.html#flask-appbuilder</a></p>
<h4 id="flask-appbuilder-security-decorators"><a href="#flask-appbuilder-security-decorators" class="headerlink" title="flask_appbuilder.security.decorators"></a>flask_appbuilder.security.decorators</h4><ul>
<li><p>flask_appbuilder.security.decorators.has_access(f)</p>
<p>使用这个装饰器可以让你的方法启用安全的权限，权限与角色相关联，而角色又与权限相关联。</p>
<p>默认情况下，权限名称即为方法名称。</p>
</li>
<li><p>flask_appbuilder.secruity.decorators.permission_name(name)</p>
<p>使用这个装饰器可以让你去覆盖权限的名称。has_access(f)方法使用方法的名称作为权限的名称，如果你想覆盖这个权限的名称，你可使用这个方法。</p>
<p>比如以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyModelView</span><span class="params">(ModelView)</span>:</span></div><div class="line">    datamodel = SQLAInterface(MyModel)</div><div class="line"></div><div class="line"><span class="meta">    @has_access</span></div><div class="line"><span class="meta">    @permission_name('GeneralXPTO_Permission')</span></div><div class="line"><span class="meta">    @expose(url='/xpto')</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">xpto</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"Your on xpto"</span></div><div class="line"></div><div class="line"><span class="meta">    @has_access</span></div><div class="line"><span class="meta">    @permission_name('GeneralXPTO_Permission')</span></div><div class="line"><span class="meta">    @expose(url='/xpto2')</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">xpto2</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"Your on xpto2"</span></div></pre></td></tr></table></figure>
<p>​</p>
</li>
</ul>
<h4 id="flask-appbuilser-models-decorators"><a href="#flask-appbuilser-models-decorators" class="headerlink" title="flask_appbuilser.models.decorators"></a>flask_appbuilser.models.decorators</h4><ul>
<li>flask_appbuilder.models.decorators.renders(col_name)</li>
</ul>
<h4 id="flask-appbuilder-baseviews"><a href="#flask-appbuilder-baseviews" class="headerlink" title="flask_appbuilder.baseviews"></a>flask_appbuilder.baseviews</h4><ul>
<li><p>flask_appbuilder.baseviews.expose(url=’/‘, methods=(‘GET’,))</p>
<p>使用这个渲染器（方法）可以将视图暴露在你的视图类里。</p>
</li>
<li><p>BaseView:</p>
<p>class flask_appbuilder.baseviews.BaseView</p>
<p>BaseView是视图中的基类，所有的视图都继承自它。当我们定义一个继承自BaseView的子类时，BaseView自动将我们用@exposed修饰的urls注册为Flask中的蓝图。</p>
<p>可以通过BaseView来实现自定义页面，并添加到菜单上或者通过一个连接来访问它。这里需要注意，作为路由的方法一定要用@exposed修饰，如果需要保护的路由则需要额外使用@has_access修饰。</p>
<p>我们可以在views.py下面自定义我们的视图：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> flask_appbuilder <span class="keyword">import</span> AppBuilder, expose, BaseView</div><div class="line">form app <span class="keyword">import</span> appbuilder</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyView</span><span class="params">(BaseView)</span>:</span></div><div class="line">  route_base = <span class="string">'/testview'</span></div><div class="line">  </div><div class="line"><span class="meta">  @has_access</span></div><div class="line"><span class="meta">  @expose('/hello/)</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">(self)</span>:</span></div><div class="line">      <span class="keyword">return</span> <span class="string">'Hello MYZD'</span></div><div class="line">  </div><div class="line"><span class="meta">  @has_access</span></div><div class="line"><span class="meta">  @expose('/myzd/&lt;string:msg&gt;')</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">myzd</span><span class="params">(self, msg)</span>:</span></div><div class="line">      msg = <span class="string">'Hello %s'</span> % (msg)</div><div class="line">      <span class="keyword">return</span> msg</div><div class="line">  </div><div class="line"><span class="meta">  @has_access</span></div><div class="line"><span class="meta">  @expose('/wel/&lt;string:msg&gt;')</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">welcome</span><span class="params">(self, msg)</span>:</span></div><div class="line">      msg = <span class="string">'Hello %s'</span> % (msg)</div><div class="line">      <span class="keyword">return</span> self.render_template(<span class="string">'index.html'</span>, msg = msg)</div></pre></td></tr></table></figure>
<p>​</p>
</li>
<li><p>BaseFormView:</p>
<p>class flask_appbuilder.baseviews.BaseFormView</p>
</li>
<li><p>BaseModeView:</p>
<p>class flask_appbuilder.baseviews.BaseModelView(**kwargs)</p>
</li>
<li><p>BaseCRUDView:</p>
<p>class flask_appbuilder.baseviews.BaseCRUDView(**kwargs)</p>
</li>
</ul>
<h4 id="flask-appbuilder-views"><a href="#flask-appbuilder-views" class="headerlink" title="flask_appbuilder.views"></a>flask_appbuilder.views</h4><ul>
<li><p>IndexView</p>
<p>class flask_appbuilder.views.IndexView</p>
</li>
<li><p>SimpleFormView</p>
<p>class flask_appbuilder.views.SimpleFormView</p>
</li>
<li><p>PublicFormView</p>
<p>class flask_appbuilder.views.PublicFormView</p>
</li>
<li><p>ModelView</p>
<p>class flask_appbuilder.views.ModelView</p>
</li>
<li><p>MasterDetailView</p>
<p>class flask_appbuilder.views.MasterDetailView</p>
</li>
<li><p>CompactCRUDMixin</p>
<p>class flask_appbuilder.views.CompactCRUDMixin</p>
</li>
</ul>
<h4 id="flask-appbuilder-actions"><a href="#flask-appbuilder-actions" class="headerlink" title="flask_appbuilder.actions"></a>flask_appbuilder.actions</h4><ul>
<li>flask_appbuilder.actions.action(name, text, confirmation=None, icon=None, multiple=True, single=True)</li>
</ul>
<h4 id="flask-appbuilder-security"><a href="#flask-appbuilder-security" class="headerlink" title="flask_appbuilder.security"></a>flask_appbuilder.security</h4><ul>
<li><p>BaseSecuritymanager</p>
<p>class flask_appbuilder.security.manager.BaseSecurityManager</p>
<p>此类下面有一个很重要的方法：</p>
<p>oauth_user_info_getter(f)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">oauth_user_info_getter</span><span class="params">(self, f)</span>:</span></div><div class="line">        <span class="string">"""</span></div><div class="line"><span class="string">            Decorator function to be the OAuth user info getter</span></div><div class="line"><span class="string">            for all the providers, receives provider and response</span></div><div class="line"><span class="string">            return a dict with the information returned from the provider.</span></div><div class="line"><span class="string">            The returned user info dict should have it's keys with the same</span></div><div class="line"><span class="string">            name as the User Model.</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">            Use it like this an example for GitHub ::</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">                @appbuilder.sm.oauth_user_info_getter</span></div><div class="line"><span class="string">                def my_oauth_user_info(sm, provider, response=None):</span></div><div class="line"><span class="string">                    if provider == 'github':</span></div><div class="line"><span class="string">                        me = sm.oauth_remotes[provider].get('user')</span></div><div class="line"><span class="string">                        return &#123;'username': me.data.get('login')&#125;</span></div><div class="line"><span class="string">                    else:</span></div><div class="line"><span class="string">                        return &#123;&#125;</span></div><div class="line"><span class="string">        """</span></div><div class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wraps</span><span class="params">(provider, response=None)</span>:</span></div><div class="line">            ret = f(self, provider, response=response)</div><div class="line">            <span class="comment"># Checks if decorator is well behaved and returns a dict as supposed.</span></div><div class="line">            <span class="keyword">if</span> <span class="keyword">not</span> type(ret) == dict:</div><div class="line">                log.error(<span class="string">"OAuth user info decorated function did not returned a dict, but: &#123;0&#125;"</span>.format(type(ret)))</div><div class="line">                <span class="keyword">return</span> &#123;&#125;</div><div class="line">            <span class="keyword">return</span> ret</div><div class="line">        self.oauth_user_info = wraps</div><div class="line">        <span class="keyword">return</span> wraps</div></pre></td></tr></table></figure>
<p>​</p>
<p>在superset中的源码是这样的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_oauth_user_info</span><span class="params">(self, provider, resp=None)</span>:</span></div><div class="line">        <span class="string">"""</span></div><div class="line"><span class="string">            Since there are different OAuth API's with different ways to</span></div><div class="line"><span class="string">            retrieve user info</span></div><div class="line"><span class="string">        """</span></div><div class="line">        <span class="comment"># for GITHUB</span></div><div class="line">        <span class="keyword">if</span> provider == <span class="string">'github'</span> <span class="keyword">or</span> provider == <span class="string">'githublocal'</span>:</div><div class="line">            me = self.appbuilder.sm.oauth_remotes[provider].get(<span class="string">'user'</span>)</div><div class="line">            log.debug(<span class="string">"User info from Github: &#123;0&#125;"</span>.format(me.data))</div><div class="line">            <span class="keyword">return</span> &#123;<span class="string">'username'</span>: <span class="string">"github_"</span> + me.data.get(<span class="string">'login'</span>)&#125;</div><div class="line">        <span class="comment"># for twitter</span></div><div class="line">        <span class="keyword">if</span> provider == <span class="string">'twitter'</span>:</div><div class="line">            me = self.appbuilder.sm.oauth_remotes[provider].get(<span class="string">'account/settings.json'</span>)</div><div class="line">            log.debug(<span class="string">"User info from Twitter: &#123;0&#125;"</span>.format(me.data))</div><div class="line">            <span class="keyword">return</span> &#123;<span class="string">'username'</span>: <span class="string">"twitter_"</span> + me.data.get(<span class="string">'screen_name'</span>, <span class="string">''</span>)&#125;</div><div class="line">        <span class="comment"># for linkedin</span></div><div class="line">        <span class="keyword">if</span> provider == <span class="string">'linkedin'</span>:</div><div class="line">            me = self.appbuilder.sm.oauth_remotes[provider].get(<span class="string">'people/~:(id,email-address,first-name,last-name)?format=json'</span>)</div><div class="line">            log.debug(<span class="string">"User info from Linkedin: &#123;0&#125;"</span>.format(me.data))</div><div class="line">            <span class="keyword">return</span> &#123;<span class="string">'username'</span>: <span class="string">"linkedin_"</span> + me.data.get(<span class="string">'id'</span>, <span class="string">''</span>),</div><div class="line">                <span class="string">'email'</span>: me.data.get(<span class="string">'email-address'</span>, <span class="string">''</span>),</div><div class="line">                <span class="string">'first_name'</span>: me.data.get(<span class="string">'firstName'</span>, <span class="string">''</span>),</div><div class="line">                <span class="string">'last_name'</span>: me.data.get(<span class="string">'lastName'</span>, <span class="string">''</span>)&#125;</div><div class="line">        <span class="comment"># for Google</span></div><div class="line">        <span class="keyword">if</span> provider == <span class="string">'google'</span>:</div><div class="line">            me = self.appbuilder.sm.oauth_remotes[provider].get(<span class="string">'userinfo'</span>)</div><div class="line">            log.debug(<span class="string">"User info from Google: &#123;0&#125;"</span>.format(me.data))</div><div class="line">            <span class="keyword">return</span> &#123;<span class="string">'username'</span>: <span class="string">"google_"</span> + me.data.get(<span class="string">'id'</span>, <span class="string">''</span>),</div><div class="line">                <span class="string">'first_name'</span>: me.data.get(<span class="string">'given_name'</span>, <span class="string">''</span>),</div><div class="line">                <span class="string">'last_name'</span>: me.data.get(<span class="string">'family_name'</span>, <span class="string">''</span>),</div><div class="line">                <span class="string">'email'</span>: me.data.get(<span class="string">'email'</span>, <span class="string">''</span>)&#125;</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> &#123;&#125;</div></pre></td></tr></table></figure>
<p>​</p>
<p>注意：supserset自己是不支持微信授权的，所以我们需要自强，加上那么一段代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#for weixin</span></div><div class="line"><span class="keyword">if</span> provider == <span class="string">'weixin'</span>:</div><div class="line">    me = self.appbuilder.sm.oauth_remotes[provider].get(<span class="string">'me'</span>)</div><div class="line">    log.debug(<span class="string">'User info from Weixin: &#123;0&#125;'</span>.format(me.data))</div><div class="line">    <span class="keyword">return</span> &#123;<span class="string">'username'</span>: me.data.get(<span class="string">'name'</span>, <span class="string">''</span>),</div><div class="line">        <span class="string">'first_name'</span>: me.data.get(<span class="string">'name'</span>, <span class="string">''</span>),</div><div class="line">        <span class="string">'last_name'</span>: me.data.get(<span class="string">'name'</span>, <span class="string">''</span>),</div><div class="line">        <span class="string">'email'</span>: me.data.get(<span class="string">'email'</span>, <span class="string">''</span>)&#125;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
<li><p>BaseRegisterUser</p>
<p>class flask_appbuilder.security.registerviews.BaseRegisterUser</p>
</li>
</ul>
<h4 id="flask-appbuilder-filemanager"><a href="#flask-appbuilder-filemanager" class="headerlink" title="flask_appbuilder.filemanager"></a>flask_appbuilder.filemanager</h4><ul>
<li>flask_appbuilder.filemanager.get_file_original_name(<em>name</em>)</li>
</ul>
<h4 id="Aggr-Functions-for-Group-By-Charts"><a href="#Aggr-Functions-for-Group-By-Charts" class="headerlink" title="Aggr Functions for Group By Charts"></a>Aggr Functions for Group By Charts</h4><ul>
<li>flask_appbuilder.models.group.aggregate_count(items, col)</li>
<li>flask_appbuilder.models.group.aggregate_avg(items, col)</li>
<li>flask_appbuilder.models.group.aggregate_sum(items, col)</li>
</ul>
<h4 id="flask-appbuilder-charts-views"><a href="#flask-appbuilder-charts-views" class="headerlink" title="flask_appbuilder.charts.views"></a>flask_appbuilder.charts.views</h4><ul>
<li><p>BaseChartView</p>
<p>class flask_appbuilder.charts.views.BaseChartView(**kwargs)</p>
</li>
<li><p>DirectByChartView</p>
<p>class flask_appbuilder.charts.views.DirectByChartView(<em>*\</em>kwargs*)</p>
</li>
<li><p>GroupByChartView</p>
<p>class flask_appbuilder.charts.views.GroupByChartView(<em>*\</em>kwargs*)</p>
</li>
<li><p>(Deprecated) ChartView</p>
<p>class flask_appbuilder.charts.views.ChartView(<em>*\</em>kwargs*)</p>
</li>
<li><p>(Deprecated) TimeChartView</p>
<p>class flask_appbuilder.charts.views.TimeChartView(<em>*\</em>kwargs*)</p>
</li>
<li><p>(Deprecated) DirectChartView</p>
<p>class flask_appbuilder.charts.views.DirectChartView(<em>*\</em>kwargs*)</p>
</li>
</ul>
<h4 id="flask-appbuilder-models-mixins"><a href="#flask-appbuilder-models-mixins" class="headerlink" title="flask_appbuilder.models.mixins"></a>flask_appbuilder.models.mixins</h4><p>​       class flask_appbuilder.models.mixins.BaseMixin</p>
<p>​       class flask_appbuilder.models.mixins.AuditMixin</p>
<ul>
<li><p>Extra Columns</p>
<p>class flask_appbuilder.models.mixins.FileColumn(<em>args. *</em>kwargs)</p>
<p>class flask_appbuilder.models.mixins.ImageColumn(thumbnail_size=(20,20,True), size=(100, 100, True), **kw)</p>
</li>
<li><p>Generic Data Source (Beta)</p>
</li>
</ul>
<h4 id="flask-appbuilder-models-generic"><a href="#flask-appbuilder-models-generic" class="headerlink" title="flask_appbuilder.models.generic"></a>flask_appbuilder.models.generic</h4><p>​       class flask_appbuilder.models.generic.GenericColumn(col_type, primarty_key=False, unique=False, nullable=False)</p>
<p>​       class flask_appbuilder.models.generic.GenericSession</p>
<h3 id="Superset-技术栈"><a href="#Superset-技术栈" class="headerlink" title="Superset 技术栈"></a>Superset 技术栈</h3><h4 id="Superset简介与使用"><a href="#Superset简介与使用" class="headerlink" title="Superset简介与使用"></a>Superset简介与使用</h4><p><a href="https://wiki.myzd.info/pages/viewpage.action?pageId=6357176" target="_blank" rel="external">https://wiki.myzd.info/pages/viewpage.action?pageId=6357176</a></p>
<p><a href="https://superset.incubator.apache.org/index.html" target="_blank" rel="external">https://superset.incubator.apache.org/index.html</a></p>
<h4 id="在Docker上使用Superse（本地docker）"><a href="#在Docker上使用Superse（本地docker）" class="headerlink" title="在Docker上使用Superse（本地docker）"></a>在Docker上使用Superse（本地docker）</h4><p>1、下载镜像</p>
<p>docker pull amancevice/superset</p>
<p>2、启动容器</p>
<p>docker run -p 8088:8088 -d amancevice/superset</p>
<p>3、进入容器</p>
<p>docker exec -it –user root [your container] /bin/bash</p>
<p>4、开始supserset的体验</p>
<p>fabmanager create-admin –app superset<br>superset db upgrade<br>superset load_examples<br>superset init<br>superset runserver -p 8088</p>
<p>5、打开浏览器并输入localhost:8080</p>
<h4 id="Superset-技术栈-1"><a href="#Superset-技术栈-1" class="headerlink" title="Superset 技术栈"></a>Superset 技术栈</h4><p><img src="/images/superset_5.png" alt="alt text"></p>
<p><img src="/images/superset_6.png" alt="alt text"></p>
<p>由上图可知：</p>
<p>Superset的前端：</p>
<ul>
<li>React</li>
<li>Bootstrap</li>
<li>Jquery</li>
<li>D3</li>
<li>NVD3</li>
</ul>
<p>Supserset后端:</p>
<ul>
<li>Python的Flask框架（其实是Flask AppBuilder，它是基于Flask的。）</li>
</ul>

  </div>
  <!--评论块-->
    

</article>
<nav class="post-nav">
  <!-- Prev Nav -->
    
  <a href="/2017/10/24/X-Forward-For获取真实IP地址/" id="post_nav-newer" class="post-nav-content prev-content">
      新篇
  </a>
    


  <!-- Next Nav -->
    
  <a href="/2017/09/18/TCP协议的三次握手和四次分手过程/" id="post_nav-older" class="post-nav-content next-content">
      旧篇
  </a>
    
</nav>
<div class="post-toc-btn"><i class="material-icons">format_list_numbered</i></div>
<div class="post-toc-none"><p>(无)</p></div>
<div class="post-toc-box">
    <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Flask-amp-Flask-AppBuilder-应用"><span class="post-toc-number">1.</span> <span class="post-toc-text">Flask & Flask AppBuilder 应用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Flask是一个使用python编写的轻量级Web应用框架。"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">Flask是一个使用python编写的轻量级Web应用框架。</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Flask-AppBuilder是一个搭建在Flask之上的简单的快速的应用程序开发框架。"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">Flask AppBuilder是一个搭建在Flask之上的简单的快速的应用程序开发框架。</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用Flask构建一个最简单的一个应用："><span class="post-toc-number">1.3.</span> <span class="post-toc-text">使用Flask构建一个最简单的一个应用：</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#使用Flask-AppBuilder快速搭建应用："><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">使用Flask AppBuilder快速搭建应用：</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#总结"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">总结</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Flask基本原理分析"><span class="post-toc-number">2.</span> <span class="post-toc-text">Flask基本原理分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#WSGI-Web-Server-Gateway-Interface"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">WSGI(Web Server Gateway Interface)</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#WSGI具体的功能"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">WSGI具体的功能</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#现在回头来看这段代码："><span class="post-toc-number">2.3.</span> <span class="post-toc-text">现在回头来看这段代码：</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Flask-AppBuilder基本原理分析"><span class="post-toc-number">3.</span> <span class="post-toc-text">Flask AppBuilder基本原理分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#flask-appbuilder"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">flask_appbuilder</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#flask-appbuilder-security-decorators"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">flask_appbuilder.security.decorators</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#flask-appbuilser-models-decorators"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">flask_appbuilser.models.decorators</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#flask-appbuilder-baseviews"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">flask_appbuilder.baseviews</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#flask-appbuilder-views"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">flask_appbuilder.views</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#flask-appbuilder-actions"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">flask_appbuilder.actions</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#flask-appbuilder-security"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">flask_appbuilder.security</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#flask-appbuilder-filemanager"><span class="post-toc-number">3.8.</span> <span class="post-toc-text">flask_appbuilder.filemanager</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Aggr-Functions-for-Group-By-Charts"><span class="post-toc-number">3.9.</span> <span class="post-toc-text">Aggr Functions for Group By Charts</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#flask-appbuilder-charts-views"><span class="post-toc-number">3.10.</span> <span class="post-toc-text">flask_appbuilder.charts.views</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#flask-appbuilder-models-mixins"><span class="post-toc-number">3.11.</span> <span class="post-toc-text">flask_appbuilder.models.mixins</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#flask-appbuilder-models-generic"><span class="post-toc-number">3.12.</span> <span class="post-toc-text">flask_appbuilder.models.generic</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Superset-技术栈"><span class="post-toc-number">4.</span> <span class="post-toc-text">Superset 技术栈</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Superset简介与使用"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">Superset简介与使用</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#在Docker上使用Superse（本地docker）"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">在Docker上使用Superse（本地docker）</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Superset-技术栈-1"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">Superset 技术栈</span></a></li></ol></li></ol>
</div>
<!--<div class="post-back"><i class="material-icons">arrow_back</i></div>-->
<script type="text/javascript">
    menu();
</script>
  </div>
</div>
<div id="bottom-outer">
  <div id="bottom-inner">
    <a  id="top-button" onfocus="this.blur();"><div class="up upinbody" style="background-color:#26A69A"><i class="material-icons material-up">vertical_align_top</i></div></a>


<p style="line-height: 45px">Copyright ©  2017  分享与进步</p>
<p style="line-height: 45px">Powered by <a href="https://hexo.io/" target="_blank"> Hexo </a> && Theme - <a href="https://github.com/moumao/hexo-theme-Vateral" target="_blank">Vateral</a></p>

  </div>
</div>

<!--影集界面需要的资源-->



<!-- scripts list from theme config.yml -->

<script src="/js/jquery-3.1.1.min.js"></script>

<script src="/js/materialize.min.js"></script>

<script src="/js/main.min.js"></script>


<script>
    NProgress.start();
    NProgress.done();
    lazy();
    links();
    window.onpopstate = menu();
    //pjax操作
    $(document).pjax('a:not(.nopjax)', '#content-inner', {fragment:'#content-inner', timeout:8000});
    $(document).on('pjax:start', NProgress.start).on('pjax:end', NProgress.done)
        .on('pjax:end', () => {
            dowmdiv();
            lazy();
            toc();
            links();
            menu();
        });
</script>

</body>
</html>
